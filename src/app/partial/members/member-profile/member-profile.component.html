<div class="container-fluid">
    <div class="row" id="membername">
        <div class="col-sm-6">
            {{FullName | titlecase}}
        </div>
        <div class="col-sm-6 text-end">
            <div class="row">
                <div class="offset-7 col-sm-5 d-flex">
                    <div class="input-group">
                        <input [owlDateTime]="dt1" (dateTimeChange)="getRage($event)" [formControl]="dateTime" class="form-control" [selectMode]="'range'" [owlDateTimeTrigger]="dt1" placeholder="Select Date">
                        <owl-date-time #dt1 [pickerType]="'calendar'"></owl-date-time>
                        <button class="btn btn-light btn-sm" type="button" [owlDateTimeTrigger]="dt1" *ngIf="!defaultCloseBtn">
                            <i class="fas fa-calendar-alt"></i>
                        </button>
                        <button class="btn btn-light border btn-sm" type="button" *ngIf="defaultCloseBtn" (click)="clearValue()">
                            <i class="fas fa-times"></i></button>
                    </div>
                    <button type="button" class="btn btn-sm btn-secondary ms-2" (click)="location.back()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
                <!-- <div class="col-sm-auto">
                    <button type="button" class="btn btn-sm btn-secondary" (click)="location.back()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div> -->
            </div>


        </div>
    </div>

    <div class="row">
        <div class="col-sm-3" id="profile-left">
            <div class="card">
                <img *ngIf="allMemberprofile?.ProfilePhoto" src="{{allMemberprofile?.ProfilePhoto}}" class="card-img-top" alt="...">
                <img *ngIf="!allMemberprofile?.ProfilePhoto" src="assets/images/dashboard-images/ncp-default.png" class="card-img-top" alt="...">
                <div class="card-body p-2">
                    <ul class="list-group list-group-flush">
                        <ng-container *ngFor="let roles of organizationRoles" >
                        <li class="list-group-item px-0" [class.d-none]="roles?.IsCurrent == 0">
                            <!-- <div class="text-end mb-1">

                            </div> -->
                            <div class="ms-2 me-auto border-none" *ngIf="roles?.IsCurrent == 1">
                                <div class="fw-bold text-main"> {{roles?.BodyOrgCellName}}</div>
                                <small class="text-primary">{{roles?.Designation}}</small><br/>
                                <small class="bg-light rounded-pill text-secondary">{{roles?.PostFromDate ? roles?.PostFromDate : 'NA'}} -  {{roles?.PostToDate ? roles?.PostToDate : 'Till Date'}}</small>
                                <button  class="btn btn-sm btn-light text-danger" data-bs-toggle="modal" (click)="getUserPostBodyId(roles.userpostbodyId)" data-bs-target="#DeleteModal"> <i class="fas fa-trash-alt"></i></button>
                            </div>
                        </li>
                    </ng-container>
                    </ul>
                    <!-- <p class="card-text mb-0">
                        <ng-container *ngIf="allMemberprofile?.Designation">{{allMemberprofile?.Designation}}</ng-container>
                    </p> -->
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <i class="fas fa-fist-raised text-success"></i> Active Since : {{allMemberprofile?.RegtDate}}
                    </li>
                    <li class="list-group-item" *ngIf="allMemberprofile?.ConstituencyName">
                        <i class="fas fa-map-marked-alt text-warning"></i> {{allMemberprofile?.ConstituencyName}}
                    </li>
                    <!-- <li class="list-group-item" *ngIf="allMemberprofile?.Designation">
                        <i class="fas fa-map-marked-alt text-warning"></i> {{allMemberprofile?.Designation}}
                    </li> -->
                    <li class="list-group-item" *ngIf="allMemberprofile?.Emailid">
                        <i class="far fa-envelope text-info"></i> {{allMemberprofile?.Emailid}}
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-phone-alt text-primary"></i> {{allMemberprofile?.MobileNo}}
                    </li>
                    <li class="list-group-item">
                        <i class="fab fa-whatsapp text-primary"></i> {{allMemberprofile?.MobileNo}}
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-map-marker-alt text-dark"></i> {{allMemberprofile?.Address}}
                    </li>
                </ul>
                <hr>
                <div class="text-end">
                    <button class="btn  btn-sm" [ngClass]="{'btn-danger':allMemberprofile?.IsUserBlock == 1, 'btn-main':allMemberprofile?.IsUserBlock == 0}" type="button" (click)="blockUnblockUser(allMemberprofile.IsUserBlock)">{{checkUserBlock}} Member</button>
                </div>
            </div>
        </div>
        <div class="col-sm-9" id="profile-right">
            <div class="card mb-3">
                <div class="card-header">
                    Overview
                </div>
                <div class="card-body">
                    <div class="row" id="overview">
                        <div class="col-sm-3">
                            <div class="card card-body">
                                <i class="fas fa-users"></i>
                                <p>Total Activity</p>
                                <h3>{{membersOverview?.TotalWork}}</h3>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="card card-body">
                                <i class="fas fa-network-wired"></i>
                                <p>Political Activity</p>
                                <h3>{{membersOverview?.TotalPoliticalWork}}</h3>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="card card-body">
                                <i class="fas fa-hashtag"></i>
                                <p>Perceptions Captured</p>
                                <h3>{{membersOverview?.TotalSocialMediaWork}}</h3>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="card card-body">
                                <i class="fas fa-people-arrows"></i>
                                <p>Personal Help</p>
                                <h3>{{membersOverview?.TotalPersonalHelp}}</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card mb-3">
                <div class="card-header">
                    Activities
                </div>
                <div class="card-body chartbox">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th scope="col">Sr. No.</th>
                                <th scope="col">Work Date</th>
                                <th scope="col">Work Type</th>
                                <th scope="col">Title/Description</th>
                                <!-- <th scope="col">Photos</th> -->
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let workList of resWorkList | paginate: { itemsPerPage: 10, currentPage: paginationNo, totalItems:total  }">
                                <td>{{workList?.SrNo}}</td>
                                <td>{{workList?.ActivityDate}}</td>
                                <td>{{workList?.Category}}</td>
                                <td>{{workList?.Title}}</td>
                                <!-- <td>
                                    <a href="#" data-bs-toggle="modal" data-bs-target="#PhotoGalleryModal"><img src="assets/images/dashboard-images/ncplogo.png" /></a>
                                    <a href="#" data-bs-toggle="modal" data-bs-target="#PhotoGalleryModal"><img src="assets/images/dashboard-images/ncplogo.png" /></a>
                                </td> -->
                                <td>
                                    <button class="btn btn-sm btn-light" (click)="getBodyMemeberActivitiesDetails(workList.Id)" data-bs-toggle="modal" data-bs-target="#ViewDetailsModal"><i class="far fa-eye"></i></button>
                                </td>
                            </tr>
                            <tr *ngIf="resWorkList?.length == 0">
                                <td colspan="5">
                                    <div class="alert alert-danger text-center py-2">No Data Found..!</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="mt-2 text-end" *ngIf="resWorkList?.length != 0">
                        <pagination-controls previousLabel="" nextLabel="" (pageChange)="onClickPagintion(pageSize = $event)"> </pagination-controls>
                        <!-- <pagination-controls previousLabel="" nextLabel="" (pageChange)="pageSize = $event" (click)="onClickPagintion(pageSize)"> </pagination-controls> -->
                    </div>
                    <div class="card-body  mt-3">
                        <div class="workCountAgainstWork chartfont h-400"></div>
                    </div>

                </div>
            </div>
            <div class="card mb-3">
                <div class="card-header">
                    Roles
                </div>
                <div class="card-body chartbox">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Sr. No.</th>
                                <th>Committee Name</th>
                                <th>Duration</th>
                                <th>Designation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let roles of organizationRoles">
                                <td>{{roles?.SrNo}}</td>
                                <td>
                                    <a class="text-primary" (click)="redirectOrgDetails(roles.id,roles.Designation,roles.BodyOrgCellName)">{{roles?.BodyOrgCellName}}</a>
                                </td>
                                <td>{{roles?.PostFromDate}} ~ {{roles?.PostFromDate ? roles?.PostFromDate : 'NA'}}</td>
                                <td>{{roles?.Designation}}</td>
                            </tr>
                            <tr *ngIf="organizationRoles?.length == 0">
                                <td colspan="5">
                                    <div class="alert alert-danger text-center py-2">No Data Found..!</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-header">
                    Recent Activity Graph
                    <span class="float-end text-muted fw-normal"> {{fromDateWorkdetails}} ~ {{toDateWorkdetails}}</span>
                </div>
                <!-- <div class="card-body">
                    year range filter (current month to last 12 months)
                    <br>Bar Chart :<br> x-axis : Month name<br> y-axis : Count of likes in this month<br> y-axis : count of work done in this month <br>
                </div> -->

                <div class="card-body recentActivityGraph chartfont h-400">
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-header">
                    Feedbacks Posted
                </div>
                <div class="card-body chartbox">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Sr. No.</th>
                                <th>Feedback Date</th>
                                <th>Feedback Message</th>
                                <th>Action Taken</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let resFeedbacks of feedbacks">
                                <td>{{resFeedbacks?.SrNo}}</td>
                                <td>
                                    {{resFeedbacks?.FeedDate}}
                                </td>
                                <td><span class="text-ellipsis-250px" [appTooltip]  title={{resFeedbacks?.Feedback}}>{{resFeedbacks?.Feedback}}</span></td>
                                <td><span class="text-ellipsis-250px" [appTooltip]  title={{resFeedbacks?.Reply}}>{{resFeedbacks?.Reply}}</span></td>
                                <td><button type="button" data-bs-toggle="modal" data-bs-target="#ViewFeedbackModal" class="btn btn-sm btn-light" (click)="viewFeedBackModalFN(resFeedbacks)"><i
                                            class="far fa-eye"></i></button></td>
                            </tr>
                            <tr *ngIf="feedbacks?.length == 0">
                                <td colspan="5">
                                    <div class="alert alert-danger text-center py-2">No Data Found..!</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- View Activity Details Modal -->
<div class="modal fade" id="ViewDetailsModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="ViewDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title" id="ViewDetailsModalLabel">Activity Details</h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row" *ngIf="resultBodyMemActDetails">
                    <div class="col-sm-6 form-container">
                        <div class="row mb-2">
                            <div class="col-sm-6">
                                <label class="form-label">#ID</label>
                                <div id="txtID" class="form-data">{{resultBodyMemActDetails.Id}}</div>
                            </div>
                            <div class="col-sm-6">
                                <label class="form-label">Post Date</label>
                                <div id="txtPostDate" class="form-data">
                                    {{resultBodyMemActDetails.ActivityDate}}</div>
                            </div>
                        </div>
                        <div class="mb-2">
                            <label class="form-label">Members FullName</label>
                            <div id="txtMembersName" class="form-data">
                                {{resultBodyMemActDetails.FullName}}
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-sm-4">
                                <label class="form-label">Work Type</label>
                                <div id="txtWorkType" class="form-data">
                                    {{resultBodyMemActDetails.CategoryName}}
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="form-label">Title</label>
                                <div id="txtTitle" class="form-data">
                                    {{resultBodyMemActDetails.Title | titlecase}}
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="form-label">Program</label>
                                <div id="txtProgram" class="form-data">
                                    {{resultBodyMemActDetails. ProgramTitle | titlecase}}
                                </div>
                            </div>
                        </div>
                        <div class="mb-2">
                            <label class="form-label">Description</label>
                            <div id="txtDescription" class="form-data">
                                {{resultBodyMemActDetails.Description | titlecase}}
                            </div>
                        </div>
                        <div class="mb-2">
                            <label class="form-label">Link URL</label>
                            <div class="form-data">
                                <a href="{{resultBodyMemActDetails.Link}}" target="_blank">
                                    {{resultBodyMemActDetails.Link}}
                                </a>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <label class="form-label">Likes</label>
                                <p class="form-data text-primary">{{resultBodyMemActDetails.TotalLikes}}</p>
                            </div>
                            <div class="col-sm-3">
                                <label class="form-label">Comments</label>
                                <p class="form-data text-success">{{resultBodyMemActDetails.TotalComments}}</p>
                            </div>
                            <div class="col-sm-3">
                                <label class="form-label">Shares</label>
                                <p class="form-data text-info">{{resultBodyMemActDetails.TotalShares}}</p>
                            </div>
                            <div class="col-sm-3">
                                <label class="form-label">Abuses</label>
                                <p class="form-data text-danger">{{resultBodyMemActDetails.TotalAbuses}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 form-container bg-light">

                        <div class="" *ngIf="lat!=''; else elseBlock">
                            <label class="form-label">Location</label>
                            <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom" [mapTypeId]="'roadmap'">
                                <agm-marker [latitude]="lat" [longitude]="lng"></agm-marker>
                            </agm-map>
                        </div>
                        <ng-template #elseBlock>
                            <div class="h-20 text-center">
                                <img src="../../../../assets/images/location-not-found.svg" class="img-h300">
                            </div>
                        </ng-template>

                    </div>
                    <div class="col-sm-12 form-container">
                        <div class="mb-0">
                            <label class="form-label">Photos</label>
                            <div class="row">
                                <div class="col-sm-2 mb-0" *ngFor="let imgs of comUserdetImg; index as i">
                                    <img [lightbox]="i" [src]="imgs?.data?.thumb" class="img-thumbnail h-150">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- View Feedback details modal -->
<!-- <ng-container *ngIf="defaultResultFeedBack"> -->
<div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" id="ViewFeedbackModal" tabindex="-1" aria-labelledby="ViewFeedbackModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <p class="modal-title" id="ViewFeedbackModalLabel">Feedback Details</p>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="form-container">
                    <div class="mb-3">
                        <label class="form-label">Feedback Date</label>
                        <p class="form-data">
                            {{resultFeedBack?.FeedDate}}
                        </p>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Feedback Message</label>
                        <p class="form-data">
                            {{resultFeedBack?.Feedback}}
                        </p>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Action Taken</label>
                        <p class="form-data">
                            {{resultFeedBack?.Reply}}
                        </p>
                    </div>
                </div>
                <hr>
                <div class="float-end">
                    <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- </ng-container> -->

<div class="modal fade" id="DeleteModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="DeleteModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-transparent border-bottom-0">
                <!-- <h5 class="modal-title" id="DeleteModalLabel">Modal title</h5> -->
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center pb-5">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130.2 130.2">
                    <circle class="path circle" fill="none" stroke="#D06079" stroke-width="6" stroke-miterlimit="10"
                        cx="65.1" cy="65.1" r="62.1" />
                    <line class="path line" fill="none" stroke="#D06079" stroke-width="6" stroke-linecap="round"
                        stroke-miterlimit="10" x1="34.4" y1="37.9" x2="95.8" y2="92.3" />
                    <line class="path line" fill="none" stroke="#D06079" stroke-width="6" stroke-linecap="round"
                        stroke-miterlimit="10" x1="95.8" y1="38" x2="34.4" y2="92.2" />
                </svg>
                <h3 class="my-3">Are You Sure?</h3>
                <p class="mb-4">Do you really want to delete this record? This process can not be undone.
                </p>
                <button class="btn btn-secondary me-2" data-bs-dismiss="modal" type="button">Cancel</button>
                <button class="btn btn-danger" type="button" (click)="deleteMember()" data-bs-dismiss="modal" type="button">Delete</button>
            </div>
        </div>
    </div>
</div>