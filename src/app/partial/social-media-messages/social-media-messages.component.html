<div class="container-fluid">
    <div class="row">
        <form [formGroup]="filterForm">
            <div class="col-sm-12">
                <div id="pageheader">
                    <span class="page-name">Messages From Social Media
                </span>
                    <span class="float-end">
                    <div class="input-group">
                        <span class="float-end" style="width: 200px;">
                            <ngx-select [allowClear]="true" (remove)="clearFilter('member')" [items]="memberNameArray" optionValueField="Id" formControlName="memberName" optionTextField="FullName" (select)="filterData()"  placeholder="Select Member Name">
                            </ngx-select>
                        </span>
                    <span class="float-end mx-2" style="width: 200px;">
                            <ngx-select [allowClear]="true" (remove)="clearFilter('district')" [items]="allDistrictArray" optionValueField="DistrictId" formControlName="district" (select)="filterData()"  optionTextField="DistrictName"  placeholder="Select District">
                            </ngx-select>
                        </span>
                    <span class="float-end" style="width: 200px;">
                            <ngx-select [allowClear]="true" (remove)="clearFilter('media')" [items]="socialMediaArray" optionValueField="Id" optionTextField="SocialMediaName" (select)="filterData()"  formControlName="mediaSource" placeholder="Select Media Source">
                            </ngx-select>
                        </span>
                </div>
                </span>
            </div>
    </div>
    </form>
</div>

<div class="row" id="dash-stats">
    <div class="col-sm">
        <div class="card card-body bg-gold">
            <i class="fas fa-comments"></i>
            <p>Total Messages</p>
            <h3>{{TotalMsg}}</h3>
        </div>
    </div>
    <div class="col-sm">
        <div class="card card-body bg-blue">
            <i class="fab fa-facebook"></i>
            <p>Facebook Count</p>
            <!-- <ng-container><i class="fa fa-spinner fa-spin" *ngIf="!dashboardCount1Array?.YouthMembers "></i></ng-container> -->
            <h3>{{FacebookCount}}</h3>
        </div>
    </div>
    <div class="col-sm">
        <div class="card card-body bg-green">
            <i class="fab fa-whatsapp"></i>
            <p>WhtasApp Count</p>
            <!-- <ng-container><i class="fa fa-spinner fa-spin" *ngIf="!dashboardCount1Array?.ActiveMembers"></i></ng-container> -->
            <h3>{{WhtasAppCount}}</h3>
        </div>
    </div>
    <div class="col-sm">
        <div class="card card-body bg-cyan">
            <i class="fab fa-twitter"></i>
            <p>Twitter Count</p>
            <!-- <ng-container><i class="fa fa-spinner fa-spin" *ngIf="!dashboardCount1Array?.CommitteeWork"></i></ng-container> -->
            <h3>{{Twitter}}</h3>
        </div>
    </div>
    <div class="col-sm">
        <div class="card card-body bg-red">
            <i class="fas fa-hashtag"></i>
            <p>Other Count</p>
            <!-- <ng-container><i class="fa fa-spinner fa-spin" *ngIf="!dashboardCount1Array?.MemberWork"></i></ng-container> -->
            <h3>{{socialMediaCount}}</h3>
        </div>
    </div>
</div>

<div class="row chartbox">
    <div class="col-sm-12">
        <div class="card card-body">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Post Date</th>
                        <th scope="col">Social Media</th>
                        <th scope="col">Members Name</th>
                        <th scope="col">Person's Name</th>
                        <th scope="col">Mobile No.</th>
                        <th scope="col">Message in Favour</th>
                        <th scope="col">Message in Oppose</th>
                        <th scope="col">Party in Support</th>
                        <th scope="col">View</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let socialMediaMessages of socialMediaMessagesArray | paginate: { itemsPerPage: 10, currentPage: paginationNo, totalItems:total}; let i = index">
                        <td>{{socialMediaMessages.SrNo}}</td>
                        <td>{{socialMediaMessages.PostDate}}</td>

                        <!-- <td><i class="fab fa-whatsapp me-1"></i> {{socialMediaMessages.SocialMediaName}}</td> -->

                        <td>
                            <ng-container *ngIf="socialMediaMessages.SocialMediaName == 'WhatsApp'"><i class="fab fa-whatsapp me-1"></i></ng-container>
                            <ng-container *ngIf="socialMediaMessages.SocialMediaName == 'Instagram'"><i class="fab fa-instagram me-1"></i></ng-container>
                            <ng-container *ngIf="socialMediaMessages.SocialMediaName == 'Facebook'"><i class="fab fa-facebook me-1"></i></ng-container>
                            <ng-container *ngIf="socialMediaMessages.SocialMediaName == 'Twitter'"><i class="fab fa-twitter me-1" style='color:rgb(70, 53, 53)'></i></ng-container>{{socialMediaMessages.SocialMediaName}}
                        </td>



                        <td><a (click)="redToMemberProfile(socialMediaMessages.Id)" class="text-primary">{{socialMediaMessages.MemberName}}</a></td>
                        <td><a (click)="redToSocialMediaPerson(socialMediaMessages.PersonName,socialMediaMessages.MemberMobileNo)" class="text-primary">{{socialMediaMessages.PersonName}}</a></td>
                        <td> <a href="tel:{{socialMediaMessages.MemberMobileNo}}">{{socialMediaMessages.MemberMobileNo}}</a></td>
                        <td><span class="text-ellipsis-150px">{{socialMediaMessages.InFavorOf}}</span></td>
                        <td><span class="text-ellipsis-150px">{{socialMediaMessages.InOppositionOf}}</span></td>
                        <td>
                            <img src="{{socialMediaMessages.PartyIconImage}}">
                            <!-- {{socialMediaMessages.PartyInSupport}} -->
                        </td>
                        <td>
                            <button class="btn btn-sm btn-light" (click)="getSocialMediaDetails(socialMediaMessages.Id)" data-bs-toggle="modal" data-bs-target="#ViewDetailsModal"><i class="far fa-eye"></i></button>
                        </td>
                    </tr>
                    <tr *ngIf="socialMediaMessagesArray?.length == 0">
                        <td colspan="10">
                            <div class="alert alert-danger text-center py-2">No Data Found..!</div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="mt-2 text-end" *ngIf="socialMediaMessagesArray?.length != 0">
                <pagination-controls previousLabel="" nextLabel="" (pageChange)="onClickPagintion(pageSize = $event)"> </pagination-controls>
            </div>
        </div>
    </div>
</div>
</div>


<!-- Modal for Location -->
<div class="modal fade" id="ViewDetailsModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="ViewDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title" id="ViewDetailsModalLabel">Details</h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6 form-container">
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label class="form-label">#ID</label>
                                <div id="txtID" class="form-data">{{socialMediaDetailsArray?.Id}}</div>
                            </div>
                            <div class="col-sm-6">
                                <label class="form-label">Post Date</label>
                                <div id="txtPostDate" class="form-data">{{socialMediaDetailsArray?.PostDate}}</div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Members Name</label>
                            <div id="txtMembersName" class="form-data">
                                {{socialMediaDetailsArray?.MemberName}}
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label class="form-label">Social Media Source</label>
                                <div id="txtSocialMediaSource" class="form-data">
                                    <i class="fab fa-whatsapp me-1"></i> {{socialMediaDetailsArray?.SocialMediaName}}
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label class="form-label">Mobile Number</label>
                                <div id="txtMobileNo" class="form-data">
                                    {{socialMediaDetailsArray?.MemberMobileNo}}
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Post Description</label>
                            <div id="txtDescription" class="form-data">
                                {{socialMediaDetailsArray?.Description}}
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-6">
                                <label class="form-label">Message in Favour</label>
                                <div id="txtMessageFavour" class="form-data">
                                    {{socialMediaDetailsArray?.InFavorOf}}
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label class="form-label">Message in Oppose</label>
                                <div id="txtMessageOppse" class="form-data">
                                    {{socialMediaDetailsArray?.InOppositionOf}}
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Party in Support</label>
                            <div id="txtPartyInSupport" class="form-data">
                                <img src="{{socialMediaDetailsArray?.PartyIconImage}}" class="partylogo" /> {{socialMediaDetailsArray?.PartyInSupport}}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 form-container">
                        <div class="mb-3">
                            <label class="form-label">Location</label>
                            <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom" [mapTypeId]="'roadmap'">
                                <agm-marker [latitude]="lat" [longitude]="lng"></agm-marker>
                            </agm-map>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Photos</label>
                            <div class="row">
                                <div class="col-sm-4 mb-3" *ngFor="let img of socialMediaDetailsImageArray">
                                    <img src="{{img.ImagePath}}" class="img-thumbnail h-150">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>